<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PixOptim - Smart Image Compression Tool</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-app-pub-3889866166086688/8785857866" crossorigin="anonymous"></script>
    <style>
        :root {
            --primary: #4361ee;
            --primary-light: #4895ef;
            --secondary: #3f37c9;
            --accent: #f72585;
            --dark: #1a1a2e;
            --light: #f8f9fa;
            --success: #4cc9f0;
            --warning: #f8961e;
            --danger: #ef233c;
            --gray: #6c757d;
            --radius: 12px;
            --shadow: 0 10px 20px rgba(0,0,0,0.1);
            --transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #e4f0fb 100%);
            color: var(--dark);
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Improved Header */
        header {
            background: rgba(255,255,255,0.9);
            backdrop-filter: blur(10px);
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 100;
            padding: 15px 0;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            text-decoration: none;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 20px;
        }

        .logo-text {
            font-size: 24px;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* Enhanced Navigation */
        nav ul {
            display: flex;
            list-style: none;
            gap: 10px;
        }

        nav ul li {
            margin: 0;
        }

        nav ul li a {
            text-decoration: none;
            color: var(--dark);
            font-weight: 500;
            padding: 10px 18px;
            border-radius: 50px;
            transition: var(--transition);
            display: block;
            font-size: 0.95rem;
            border: 1px solid transparent;
        }

        nav ul li a:hover {
            background: rgba(67,97,238,0.05);
            color: var(--primary);
        }

        nav ul li a.active {
            background: rgba(67,97,238,0.1);
            color: var(--primary);
            border-color: rgba(67,97,238,0.2);
        }

        nav ul li:last-child a {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(67,97,238,0.3);
        }

        nav ul li:last-child a:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(67,97,238,0.4);
        }

        /* Hero Section */
        .hero {
            text-align: center;
            padding: 80px 0 40px;
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(67,97,238,0.1) 0%, rgba(255,255,255,0) 70%);
            z-index: -1;
        }

        .hero h1 {
            font-size: 3.5rem;
            margin-bottom: 20px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .hero p {
            font-size: 1.2rem;
            color: var(--gray);
            max-width: 700px;
            margin: 0 auto 40px;
        }

        /* Compressor Container */
        .compressor-container {
            background: white;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            padding: 40px;
            margin-bottom: 40px;
            transform: translateY(0);
            transition: var(--transition);
        }
    

        .compressor-container:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.15);
        }

        /* Upload Area */
        .upload-area {
            border: 2px dashed var(--primary-light);
            border-radius: var(--radius);
            padding: 50px 20px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            margin-bottom: 30px;
            background: rgba(67,97,238,0.03);
            position: relative;
            overflow: hidden;
        }

        .upload-area:hover {
            border-color: var(--primary);
            background: rgba(67,97,238,0.05);
        }

        .upload-area.active {
            border-color: var(--success);
            background: rgba(76,201,240,0.05);
        }

        .upload-icon {
            font-size: 60px;
            margin-bottom: 20px;
            color: var(--primary);
            transition: var(--transition);
        }

        .upload-area:hover .upload-icon {
            transform: scale(1.1);
            color: var(--secondary);
        }

        .upload-area h2 {
            margin-bottom: 15px;
            color: var(--dark);
            font-weight: 600;
        }

        .upload-area p {
            color: var(--gray);
            margin-bottom: 25px;
        }

        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            padding: 12px 28px;
            border-radius: 50px;
            text-decoration: none;
            font-weight: 500;
            transition: var(--transition);
            border: none;
            cursor: pointer;
            gap: 8px;
            box-shadow: 0 4px 15px rgba(67,97,238,0.3);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(67,97,238,0.4);
        }

        .btn-outline {
            background: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
            box-shadow: none;
        }

        .btn-outline:hover {
            background: rgba(67,97,238,0.05);
        }

        /* Controls */
        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .control-group {
            position: relative;
        }

        .control-group label {
            display: block;
            margin-bottom: 10px;
            font-weight: 500;
            color: var(--dark);
            font-size: 0.95rem;
        }

        .control-group select, 
        .control-group input[type="range"],
        .control-group input[type="number"] {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #e0e0e0;
            border-radius: var(--radius);
            background: white;
            font-family: 'Poppins', sans-serif;
            transition: var(--transition);
        }

        .control-group select:focus, 
        .control-group input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(67,97,238,0.1);
        }

        .range-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .range-value {
            min-width: 45px;
            text-align: center;
            font-weight: 600;
            color: var(--primary);
        }

        input[type="range"] {
            -webkit-appearance: none;
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            flex: 1;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 22px;
            height: 22px;
            background: var(--primary);
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            transition: var(--transition);
        }

        input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.1);
            background: var(--secondary);
        }

        /* Preview Container */
        .preview-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 40px;
            opacity: 0;
            height: 0;
            overflow: hidden;
            transition: all 0.5s ease;
        }

        .preview-container.show {
            opacity: 1;
            height: auto;
        }

        .image-preview {
            background: white;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            overflow: hidden;
            transition: var(--transition);
        }

        .image-preview:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.1);
        }

        .preview-header {
            padding: 15px 20px;
            border-bottom: 1px solid #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .preview-header h3 {
            font-size: 1.1rem;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .preview-header .badge {
            background: var(--primary-light);
            color: white;
            padding: 3px 10px;
            border-radius: 50px;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .preview-image-container {
            padding: 20px;
            text-align: center;
            background: #f9f9f9;
        }

        .preview-image {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .image-info {
            padding: 20px;
        }

        .info-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
        }

        .info-label {
            color: var(--gray);
            font-size: 0.9rem;
        }

        .info-value {
            font-weight: 500;
            color: var(--dark);
        }

        .reduction-value {
            color: var(--success);
            font-weight: 600;
        }

        .download-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, var(--success) 0%, #00b4d8 100%);
            color: white;
            border: none;
            border-radius: 0 0 var(--radius) var(--radius);
            font-weight: 500;
            cursor: pointer;
            gap: 8px;
            transition: var(--transition);
        }

        .download-btn:hover {
            background: linear-gradient(135deg, #00b4d8 0%, var(--success) 100%);
        }

        /* Ad Container */
        .ad-container {
            margin: 40px 0;
            text-align: center;
            background: white;
            border-radius: var(--radius);
            padding: 20px;
            box-shadow: var(--shadow);
        }

        .ad-container p {
            color: var(--gray);
            font-size: 0.9rem;
            margin-bottom: 10px;
        }

        /* Features */
        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 60px;
        }

        .feature-card {
            background: white;
            border-radius: var(--radius);
            padding: 30px;
            box-shadow: var(--shadow);
            transition: var(--transition);
            text-align: center;
        }

        .feature-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.1);
        }

        .feature-icon {
            width: 70px;
            height: 70px;
            margin: 0 auto 20px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 30px;
        }

        .feature-card h3 {
            margin-bottom: 15px;
            color: var(--dark);
        }

        .feature-card p {
            color: var(--gray);
            font-size: 0.95rem;
        }

        /* Footer */
        footer {
            background: var(--dark);
            color: white;
            padding: 60px 0 20px;
            position: relative;
        }

        footer::before {
            content: "";
            position: absolute;
            top: -50px;
            left: 0;
            width: 100%;
            height: 100px;
            background: url('data:image/svg+xml;utf8,<svg viewBox="0 0 1200 120" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none"><path d="M0,0V46.29c47.79,22.2,103.59,32.17,158,28,70.36-5.37,136.33-33.31,206.8-37.5C438.64,32.43,512.34,53.67,583,72.05c69.27,18,138.3,24.88,209.4,13.08,36.15-6,69.85-17.84,104.45-29.34C989.49,25,1113-14.29,1200,52.47V0Z" fill="%231a1a2e" opacity=".25"/><path d="M0,0V15.81C13,36.92,27.64,56.86,47.69,72.05,99.41,111.27,165,111,224.58,91.58c31.15-10.15,60.09-26.07,89.67-39.8,40.92-19,84.73-46,130.83-49.67,36.26-2.85,70.9,9.42,98.6,31.56,31.77,25.39,62.32,62,103.63,73,40.44,10.79,81.35-6.69,119.13-24.28s75.16-39,116.92-43.05c59.73-5.85,113.28,22.88,168.9,38.84,30.2,8.66,59,6.17,87.09-7.5,22.43-10.89,48-26.93,60.65-49.24V0Z" fill="%231a1a2e" opacity=".5"/><path d="M0,0V5.63C149.93,59,314.09,71.32,475.83,42.57c43-7.64,84.23-20.12,127.61-26.46,59-8.63,112.48,12.24,165.56,35.4C827.93,77.22,886,95.24,951.2,90c86.53-7,172.46-45.71,248.8-84.81V0Z" fill="%231a1a2e"/></svg>');
            background-size: cover;
            background-repeat: no-repeat;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            margin-bottom: 40px;
        }

        .footer-column h3 {
            margin-bottom: 20px;
            font-size: 1.2rem;
            position: relative;
            padding-bottom: 10px;
        }

        .footer-column h3::after {
            content: "";
            position: absolute;
            bottom: 0;
            left: 0;
            width: 50px;
            height: 3px;
            background: var(--primary);
            border-radius: 3px;
        }

        .footer-column ul {
            list-style: none;
        }

        .footer-column ul li {
            margin-bottom: 12px;
        }

        .footer-column ul li a {
            color: #bdc1c6;
            text-decoration: none;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .footer-column ul li a:hover {
            color: white;
            transform: translateX(5px);
        }

        .social-links {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .social-links a {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255,255,255,0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            transition: var(--transition);
        }

        .social-links a:hover {
            background: var(--primary);
            transform: translateY(-3px);
        }

        .copyright {
            text-align: center;
            padding-top: 30px;
            border-top: 1px solid rgba(255,255,255,0.1);
            color: rgba(255,255,255,0.7);
            font-size: 0.9rem;
        }

        /* Utility Classes */
        .hidden {
            display: none;
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2.5rem;
            }
            
            .hero p {
                font-size: 1rem;
            }
            
            .compressor-container {
                padding: 30px 20px;
            }
            
            .upload-area {
                padding: 40px 15px;
            }

            nav ul {
                display: none;
            }

            .mobile-menu-btn {
                display: block;
                background: none;
                border: none;
                font-size: 24px;
                cursor: pointer;
                color: var(--dark);
            }
        }

        @media (max-width: 480px) {
            .hero h1 {
                font-size: 2rem;
            }
            
            .controls {
                grid-template-columns: 1fr;
            }
            
            .preview-container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container header-content">
            <a href="#" class="logo">
                <div class="logo-icon">
                    <i class="fas fa-compress-alt"></i>
                </div>
                <span class="logo-text">PixOptim</span>
            </a>
            <button class="mobile-menu-btn">☰</button>
            <nav>
                <ul>
                    <li><a href="#" class="active">Home</a></li>
                    <li><a href="#">Features</a></li>
                    <li><a href="#">How It Works</a></li>
                    <li><a href="#">Pricing</a></li>
                    <li><a href="#">Login</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main class="container">
        <section class="hero">
            <h1>Optimize Your Images in Seconds</h1>
            <p>Reduce image file sizes without sacrificing quality. Perfect for websites, social media, and storage optimization.</p>
            <div class="compressor-container pulse">
                <div class="upload-area" id="uploadArea">
                    <div class="upload-icon">
                        <i class="fas fa-cloud-upload-alt"></i>
                    </div>
                    <h2>Drag & Drop Your Images Here</h2>
                    <p>or click to browse files (JPG, PNG, WebP supported)</p>
                    <input type="file" id="fileInput" accept="image/*" class="hidden">
                    <button class="btn" id="selectFilesBtn">
                        <i class="fas fa-folder-open"></i> Select Images
                    </button>
                </div>

                <div class="controls">
                    <div class="control-group">
                        <label for="format"><i class="fas fa-file-image"></i> Output Format</label>
                        <select id="format">
                            <option value="original">Original Format</option>
                            <option value="jpeg">JPEG (Best for photos)</option>
                            <option value="png">PNG (Best for transparency)</option>
                            <option value="webp">WebP (Modern format)</option>
                        </select>
                    </div>

                    <div class="control-group">
                        <label for="quality"><i class="fas fa-sliders-h"></i> Compression Level</label>
                        <div class="range-container">
                            <input type="range" id="quality" min="0" max="100" value="80">
                            <span class="range-value" id="qualityValue">80%</span>
                        </div>
                    </div>

                    <div class="control-group">
                        <label for="resize"><i class="fas fa-expand"></i> Resize Image</label>
                        <select id="resize">
                            <option value="none">Don't resize</option>
                            <option value="640">640px (Small)</option>
                            <option value="800">800px (Medium)</option>
                            <option value="1024">1024px (Large)</option>
                            <option value="custom">Custom size</option>
                        </select>
                    </div>
                </div>

                <div class="hidden" id="customSizeContainer">
                    <div class="controls">
                        <div class="control-group">
                            <label for="width"><i class="fas fa-arrows-alt-h"></i> Width (px)</label>
                            <input type="number" id="width" placeholder="Width in pixels" min="10" max="5000">
                        </div>
                        <div class="control-group">
                            <label for="height"><i class="fas fa-arrows-alt-v"></i> Height (px)</label>
                            <input type="number" id="height" placeholder="Height in pixels" min="10" max="5000">
                        </div>
                        <div class="control-group">
                            <label for="aspectRatio"><i class="fas fa-lock"></i> Maintain Aspect Ratio</label>
                            <select id="aspectRatio">
                                <option value="yes">Yes</option>
                                <option value="no">No</option>
                            </select>
                        </div>
                    </div>
                </div>

                <button class="btn" id="compressBtn">
                    <i class="fas fa-compress-arrows-alt"></i> Compress Images
                </button>

                <div class="preview-container" id="previewContainer">
                    <div class="image-preview">
                        <div class="preview-header">
                            <h3><i class="fas fa-image"></i> Original Image <span class="badge">Before</span></h3>
                        </div>
                        <div class="preview-image-container">
                            <img id="originalImage" src="#" alt="Original image" class="preview-image">
                        </div>
                        <div class="image-info">
                            <div class="info-row">
                                <span class="info-label">File Size:</span>
                                <span class="info-value" id="originalSize">-</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">Dimensions:</span>
                                <span class="info-value" id="originalDimensions">-</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">Format:</span>
                                <span class="info-value" id="originalType">-</span>
                            </div>
                        </div>
                    </div>

                    <div class="image-preview">
                        <div class="preview-header">
                            <h3><i class="fas fa-file-export"></i> Compressed Image <span class="badge">After</span></h3>
                        </div>
                        <div class="preview-image-container">
                            <img id="compressedImage" src="#" alt="Compressed image" class="preview-image">
                        </div>
                        <div class="image-info">
                            <div class="info-row">
                                <span class="info-label">File Size:</span>
                                <span class="info-value" id="compressedSize">-</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">Dimensions:</span>
                                <span class="info-value" id="compressedDimensions">-</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">Format:</span>
                                <span class="info-value" id="compressedType">-</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">Reduction:</span>
                                <span class="info-value reduction-value" id="reduction">-</span>
                            </div>
                        </div>
                        <button class="download-btn" id="downloadBtn">
                            <i class="fas fa-download"></i> Download Compressed Image
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Ad Unit -->
        <div class="ad-container">
            <p>Advertisement</p>
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-app-pub-3889866166086688/8785857866"
                 data-ad-slot="YOUR_BANNER_AD_SLOT_ID"
                 data-ad-format="auto"
                 data-full-width-responsive="true"></ins>
            <script>
                 (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        </div>

        <section class="features">
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-bolt"></i>
                </div>
                <h3>Lightning Fast</h3>
                <p>Our advanced compression algorithms process images in seconds, saving you valuable time.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-lock"></i>
                </div>
                <h3>100% Private</h3>
                <p>All processing happens in your browser. Your images never leave your device.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-chart-line"></i>
                </div>
                <h3>Smart Optimization</h3>
                <p>Intelligent algorithms find the perfect balance between quality and file size.</p>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>PixOptim</h3>
                    <p>The smartest way to optimize your images online. Free to use with no registration required.</p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-github"></i></a>
                    </div>
                </div>
                <div class="footer-column">
                    <h3>Quick Links</h3>
                    <ul>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Home</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Features</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> How It Works</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> FAQ</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Support</h3>
                    <ul>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Contact Us</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Privacy Policy</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Terms of Service</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Help Center</a></li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; <span id="currentYear"></span> PixOptim. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Set current year in footer
            document.getElementById('currentYear').textContent = new Date().getFullYear();

            // Mobile menu toggle
            const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
            const nav = document.querySelector('nav');
            
            if (mobileMenuBtn) {
                mobileMenuBtn.addEventListener('click', function() {
                    nav.classList.toggle('show');
                });
            }

            // Image compression functionality
            const uploadArea = document.getElementById('uploadArea');
            const fileInput = document.getElementById('fileInput');
            const selectFilesBtn = document.getElementById('selectFilesBtn');
            const compressBtn = document.getElementById('compressBtn');
            const previewContainer = document.getElementById('previewContainer');
            const downloadBtn = document.getElementById('downloadBtn');
            const qualitySlider = document.getElementById('quality');
            const qualityValue = document.getElementById('qualityValue');
            const formatSelect = document.getElementById('format');
            const resizeSelect = document.getElementById('resize');
            const customSizeContainer = document.getElementById('customSizeContainer');
            const widthInput = document.getElementById('width');
            const heightInput = document.getElementById('height');
            const aspectRatioSelect = document.getElementById('aspectRatio');

            let originalFile = null;
            let compressedBlob = null;
            let lastChanged = 'width';

            // Update quality value display
            qualitySlider.addEventListener('input', function() {
                qualityValue.textContent = `${this.value}%`;
            });

            // Show/hide custom size inputs
            resizeSelect.addEventListener('change', function() {
                if (this.value === 'custom') {
                    customSizeContainer.classList.remove('hidden');
                } else {
                    customSizeContainer.classList.add('hidden');
                }
            });

            // Track which dimension was last changed
            widthInput.addEventListener('input', function() {
                lastChanged = 'width';
            });
            heightInput.addEventListener('input', function() {
                lastChanged = 'height';
            });

            // Handle file selection
            selectFilesBtn.addEventListener('click', function() {
                fileInput.click();
            });

            uploadArea.addEventListener('click', function() {
                fileInput.click();
            });

            // Drag and drop functionality
            uploadArea.addEventListener('dragover', function(e) {
                e.preventDefault();
                this.classList.add('active');
            });

            uploadArea.addEventListener('dragleave', function() {
                this.classList.remove('active');
            });

            uploadArea.addEventListener('drop', function(e) {
                e.preventDefault();
                this.classList.remove('active');
                if (e.dataTransfer.files.length) {
                    handleFileSelection(e.dataTransfer.files[0]);
                }
            });

            fileInput.addEventListener('change', function() {
                if (this.files.length) {
                    handleFileSelection(this.files[0]);
                }
            });

            // Handle image compression
            compressBtn.addEventListener('click', function() {
                if (!originalFile) {
                    alert('Please select an image first');
                    return;
                }

                compressImage();
            });

            // Download compressed image
            downloadBtn.addEventListener('click', function() {
                if (!compressedBlob) {
                    alert('No compressed image available');
                    return;
                }

                const url = URL.createObjectURL(compressedBlob);
                const a = document.createElement('a');
                a.href = url;
                
                // Get the original filename without extension
                const originalName = originalFile.name;
                const dotIndex = originalName.lastIndexOf('.');
                const nameWithoutExt = dotIndex > 0 ? originalName.substring(0, dotIndex) : originalName;
                
                // Get the selected format
                let format = formatSelect.value;
                if (format === 'original') {
                    format = originalFile.type.split('/')[1];
                }
                
                a.download = `${nameWithoutExt}-compressed.${format}`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            });

            function handleFileSelection(file) {
                // Check if file is an image
                if (!file.type.match('image.*')) {
                    alert('Please select an image file (JPG, PNG, WebP)');
                    return;
                }

                originalFile = file;

                // Display original image info
                const originalImage = document.getElementById('originalImage');
                const originalSize = document.getElementById('originalSize');
                const originalDimensions = document.getElementById('originalDimensions');
                const originalType = document.getElementById('originalType');

                const reader = new FileReader();
                reader.onload = function(e) {
                    originalImage.src = e.target.result;

                    // Get image dimensions
                    const img = new Image();
                    img.onload = function() {
                        originalDimensions.textContent = `${this.width} × ${this.height} px`;
                        
                        // Set custom size inputs to original dimensions
                        widthInput.value = this.width;
                        heightInput.value = this.height;
                    };
                    img.src = e.target.result;
                };
                reader.readAsDataURL(file);

                // Display file info
                originalSize.textContent = formatFileSize(file.size);
                originalType.textContent = file.type.split('/')[1].toUpperCase();

                // Show preview container
                previewContainer.classList.add('show');
            }

            function compressImage() {
                const quality = parseInt(qualitySlider.value) / 100;
                const format = formatSelect.value === 'original' ? null : formatSelect.value;
                
                // Get resize options
                let targetWidth, targetHeight;
                if (resizeSelect.value === 'custom') {
                    targetWidth = parseInt(widthInput.value);
                    targetHeight = parseInt(heightInput.value);
                    
                    if (isNaN(targetWidth)) targetWidth = null;
                    if (isNaN(targetHeight)) targetHeight = null;
                } else if (resizeSelect.value !== 'none') {
                    targetWidth = parseInt(resizeSelect.value);
                    targetHeight = null; // Let height adjust to maintain aspect ratio
                } else {
                    targetWidth = targetHeight = null;
                }

                // Show loading state
                const originalBtnText = compressBtn.innerHTML;
                compressBtn.disabled = true;
                compressBtn.innerHTML = `<span class="loading"></span> Compressing...`;

                // Use canvas to compress image
                const img = new Image();
                img.onload = function() {
                    // Calculate new dimensions maintaining aspect ratio if needed
                    let newWidth = this.width;
                    let newHeight = this.height;

                    if (targetWidth || targetHeight) {
                        const maintainAspect = aspectRatioSelect.value === 'yes' || resizeSelect.value !== 'custom';
                        
                        if (maintainAspect) {
                            if (targetWidth && !targetHeight) {
                                // Only width is specified
                                const ratio = this.height / this.width;
                                newWidth = targetWidth;
                                newHeight = Math.round(targetWidth * ratio);
                            } else if (!targetWidth && targetHeight) {
                                // Only height is specified
                                const ratio = this.width / this.height;
                                newHeight = targetHeight;
                                newWidth = Math.round(targetHeight * ratio);
                            } else if (targetWidth && targetHeight) {
                                // Both dimensions specified
                                if (lastChanged === 'width') {
                                    const ratio = this.height / this.width;
                                    newWidth = targetWidth;
                                    newHeight = Math.round(targetWidth * ratio);
                                } else {
                                    const ratio = this.width / this.height;
                                    newHeight = targetHeight;
                                    newWidth = Math.round(targetHeight * ratio);
                                }
                            }
                        } else {
                            // Don't maintain aspect ratio
                            newWidth = targetWidth || newWidth;
                            newHeight = targetHeight || newHeight;
                        }
                    }

                    // Create canvas
                    const canvas = document.createElement('canvas');
                    canvas.width = newWidth;
                    canvas.height = newHeight;
                    const ctx = canvas.getContext('2d');

                    // Draw image on canvas
                    ctx.drawImage(img, 0, 0, newWidth, newHeight);

                    // Convert to blob with specified quality and format
                    let mimeType;
                    switch(format) {
                        case 'jpeg': mimeType = 'image/jpeg'; break;
                        case 'png': mimeType = 'image/png'; break;
                        case 'webp': mimeType = 'image/webp'; break;
                        default: mimeType = originalFile.type;
                    }

                    canvas.toBlob(function(blob) {
                        if (!blob) {
                            alert('Compression failed. Please try again.');
                            compressBtn.disabled = false;
                            compressBtn.innerHTML = originalBtnText;
                            return;
                        }

                        compressedBlob = blob;

                        // Display compressed image
                        const compressedImage = document.getElementById('compressedImage');
                        const compressedSize = document.getElementById('compressedSize');
                        const compressedDimensions = document.getElementById('compressedDimensions');
                        const compressedType = document.getElementById('compressedType');
                        const reduction = document.getElementById('reduction');

                        const reader = new FileReader();
                        reader.onload = function(e) {
                            compressedImage.src = e.target.result;
                        };
                        reader.readAsDataURL(blob);

                        // Display compressed file info
                        compressedSize.textContent = formatFileSize(blob.size);
                        compressedDimensions.textContent = `${newWidth} × ${newHeight} px`;
                        
                        const outputFormat = format || originalFile.type.split('/')[1];
                        compressedType.textContent = outputFormat.toUpperCase();

                        // Calculate reduction percentage
                        const reductionPercent = ((originalFile.size - blob.size) / originalFile.size * 100).toFixed(1);
                        reduction.textContent = `${reductionPercent}% smaller`;

                        // Reset button
                        compressBtn.disabled = false;
                        compressBtn.innerHTML = `<i class="fas fa-compress-arrows-alt"></i> Compress Images`;
                    }, mimeType, quality);
                };
                img.onerror = function() {
                    alert('Error loading image. Please try another file.');
                    compressBtn.disabled = false;
                    compressBtn.innerHTML = originalBtnText;
                };
                img.src = URL.createObjectURL(originalFile);
            }

            function formatFileSize(bytes) {
                if (bytes === 0) return '0 Bytes';
                const k = 1024;
                const sizes = ['Bytes', 'KB', 'MB', 'GB'];
                const i = Math.floor(Math.log(bytes) / Math.log(k));
                return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
            }
        });
    </script>
</body>
</html>
